<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Facebook</title>
    <!-- CSS Modules - Load in order -->
    <link rel="stylesheet" href="/css/base.css">
    <link rel="stylesheet" href="/css/header.css">
    <link rel="stylesheet" href="/css/dropdown-user.css">
    <link rel="stylesheet" href="/css/dropdown-messenger.css">
    <link rel="stylesheet" href="/css/dropdown-friend-request.css">
    <link rel="stylesheet" href="/css/dropdown-notification.css">
    <link rel="stylesheet" href="/css/layout.css">
    <link rel="stylesheet" href="/css/posts.css">
    <link rel="stylesheet" href="/css/sidebar.css">
    <link rel="stylesheet" href="/css/modals.css">
    <link rel="stylesheet" href="/css/chat-popup.css">
    <link rel="stylesheet" href="/css/responsive.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css">
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div class="header-content">
            <div class="header-left">
                <a href="/html/home.html" class="logo">f</a>
                <div class="search-box" style="position: relative;">
                    <span><i class="fa-solid fa-magnifying-glass"></i></span>
                    <input type="text" id="globalSearch" placeholder="T√¨m ki·∫øm tr√™n Facebook" autocomplete="off">
                    <div id="searchResults" class="search-results-dropdown" style="display: none;">
                        <div class="search-results-content"></div>
                    </div>
                </div>
            </div>
            
            <div class="header-center">
                <div class="nav-icon active" title="Trang ch·ªß">
                    <i class="fa-solid fa-house"></i>
                </div>
                <div class="nav-icon" title="B·∫°n b√®">
                    <i class="fa-solid fa-user-group"></i>
                </div>
                <div class="nav-icon" title="Video">
                    <i class="fa-solid fa-tv"></i>
                </div>
                <div class="nav-icon" title="Marketplace">
                    <i class="fa-solid fa-store"></i>
                </div>
                <div class="nav-icon" title="Gaming">
                    <i class="fa-solid fa-gamepad"></i>
                </div>
            </div>
            
            <div class="header-right">
                <div class="icon-button" id="messengerBtn" onclick="toggleMessengerDropdown()" style="cursor: pointer; position: relative;">
                    <i class="fa-regular fa-message"></i>
                    <span class="notification-badge" id="messengerBadge" style="display: none;">0</span>
                </div>
                <div class="icon-button" id="friendRequestBtn" onclick="toggleFriendRequestDropdown()" style="cursor: pointer; position: relative;">
                    <i class="fa-solid fa-user-group"></i>
                    <span class="notification-badge" id="friendRequestBadge" style="display: none;">0</span>
                </div>
                <div class="icon-button notification-icon" onclick="toggleNotificationDropdown()" style="cursor: pointer; position: relative;">
                    <i class="fa-regular fa-bell"></i>
                    <span class="notification-badge" style="display: none;">0</span>
                </div>
                
                <!-- Messenger Dropdown -->
                <div id="messengerDropdown" class="messenger-dropdown">
                    <div class="messenger-dropdown-header">
                        <h3>ƒêo·∫°n chat</h3>
                        <div class="messenger-dropdown-actions">
                            <button class="messenger-dropdown-icon-btn" title="T√πy ch·ªçn">‚ãØ</button>
                            <button class="messenger-dropdown-icon-btn" title="Tin nh·∫Øn m·ªõi">‚úé</button>
                        </div>
                    </div>
                    <div class="messenger-dropdown-search">
                        <input type="text" placeholder="T√¨m ki·∫øm trong Messenger" id="messengerSearch">
                    </div>
                    <div class="messenger-dropdown-list" id="messengerConversationsList">
                        <div class="messenger-loading">ƒêang t·∫£i...</div>
                    </div>
                    <div class="messenger-dropdown-footer">
                        <a href="/html/messages.html" class="messenger-view-all">Xem t·∫•t c·∫£ trong Messenger</a>
                    </div>
                </div>
                
                <!-- Friend Request Dropdown -->
                <div id="friendRequestDropdown" class="messenger-dropdown">
                    <div class="messenger-dropdown-header">
                        <h3>L·ªùi m·ªùi k·∫øt b·∫°n</h3>
                    </div>
                    <div class="messenger-dropdown-list" id="friendRequestsList">
                        <div class="messenger-loading">ƒêang t·∫£i...</div>
                    </div>
                    <div class="messenger-dropdown-footer">
                        <a href="#" class="messenger-view-all">Xem t·∫•t c·∫£</a>
                    </div>
                </div>
                
                <!-- Notification Dropdown -->
                <div class="notification-dropdown">
                    <div class="notification-dropdown-header">
                        <h3>Th√¥ng b√°o</h3>
                        <span class="mark-all-read-btn" onclick="markAllNotificationsAsRead()">ƒê√°nh d·∫•u ƒë√£ ƒë·ªçc t·∫•t c·∫£</span>
                    </div>
                    <div class="notification-list">
                        <div class="notification-empty">
                            <i class="fa-regular fa-bell"></i>
                            <p>B·∫°n kh√¥ng c√≥ th√¥ng b√°o n√†o</p>
                        </div>
                    </div>
                </div>
                
                <div style="position: relative;">
                    <div class="user-avatar" id="userAvatar" onclick="toggleDropdown()">U</div>
                    <div class="user-dropdown" id="userDropdown">
                        <div class="dropdown-header">
                            <div class="dropdown-user" onclick="goToProfile()" style="cursor: pointer;">
                                <div class="dropdown-avatar" id="dropdownAvatar">U</div>
                                <div class="dropdown-user-info">
                                    <div class="dropdown-username" id="dropdownUsername">User</div>
                                    <div class="dropdown-see-profile">Xem trang c√° nh√¢n c·ªßa b·∫°n</div>
                                </div>
                            </div>
                        </div>
                                        <div class="dropdown-divider"></div>
                        <div class="dropdown-item" onclick="openProfilePictureUpload()">
                            <div class="dropdown-icon">üì∑</div>
                            <div class="dropdown-text">
                                <div class="dropdown-title">ƒê·ªïi ·∫£nh ƒë·∫°i di·ªán</div>
                            </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <div class="dropdown-item" onclick="logout()">
                            <div class="dropdown-icon">üö™</div>
                            <div class="dropdown-text">
                                <div class="dropdown-title">ƒêƒÉng xu·∫•t</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Main Content -->
    <div class="main-content">
        <!-- Left Sidebar -->
        <div class="left-sidebar">
            <div class="sidebar-item" onclick="goToProfile()" style="cursor: pointer;">
                <div class="user-avatar" id="sidebarAvatar">U</div>
                <span id="sidebarUsername">User</span>
            </div>
            <div class="sidebar-item">
                <div class="sidebar-icon">üë•</div>
                <span>B·∫°n b√®</span>
            </div>
            <div class="sidebar-item">
                <div class="sidebar-icon">‚è∞</div>
                <span>K·ª∑ ni·ªám</span>
            </div>
            <div class="sidebar-item">
                <div class="sidebar-icon">üíæ</div>
                <span>ƒê√£ l∆∞u</span>
            </div>
            <div class="sidebar-item">
                <div class="sidebar-icon">üë•</div>
                <span>Nh√≥m</span>
            </div>
            <div class="sidebar-item">
                <div class="sidebar-icon">üì∫</div>
                <span>Video</span>
            </div>
            <div class="sidebar-item">
                <div class="sidebar-icon">üè™</div>
                <span>Marketplace</span>
            </div>
            <div class="sidebar-item">
                <div class="sidebar-icon">üìÖ</div>
                <span>S·ª± ki·ªán</span>
            </div>
            <div class="sidebar-item" onclick="logout()">
                <div class="sidebar-icon">üö™</div>
                <span>ƒêƒÉng xu·∫•t</span>
            </div>
        </div>
        
        <!-- Center Feed -->
        <div class="center-feed">
            <!-- Stories -->
            <div class="stories-container">
                <div class="story-card">
                    <div class="story-avatar">üë§</div>
                    <div class="story-name">Tin c·ªßa b·∫°n</div>
                </div>
                <div class="story-card">
                    <div class="story-avatar">üë§</div>
                    <div class="story-name">Jane Smith</div>
                </div>
                <div class="story-card">
                    <div class="story-avatar">üë§</div>
                    <div class="story-name">Bob Wilson</div>
                </div>
                <div class="story-card">
                    <div class="story-avatar">üë§</div>
                    <div class="story-name">Alice Johnson</div>
                </div>
            </div>
            
            <!-- Create Post -->
            <div class="create-post">
                <div class="create-post-top">
                    <div class="create-post-avatar" id="createPostAvatar">U</div>
                    <input type="text" class="create-post-input" placeholder="B·∫°n ƒëang nghƒ© g√¨?" id="openCreatePost" readonly>
                </div>
                <div class="create-post-divider"></div>
                <div class="create-post-actions">
                    <div class="post-action">
                        <span class="post-action-icon" style="color: #f3425f;">üé•</span>
                        <span>Video tr·ª±c ti·∫øp</span>
                    </div>
                    <div class="post-action">
                        <span class="post-action-icon" style="color: #45bd62;">üñºÔ∏è</span>
                        <span>·∫¢nh/video</span>
                    </div>
                    <div class="post-action">
                        <span class="post-action-icon" style="color: #f7b928;">üòä</span>
                        <span>C·∫£m x√∫c/ho·∫°t ƒë·ªông</span>
                    </div>
                </div>
            </div>
            
            <!-- Posts Feed -->
            <div id="postsFeed"></div>
        </div>
        
        <!-- Right Sidebar -->
        <div class="right-sidebar">
            <div class="sidebar-section">
                <div class="sidebar-title">Ng∆∞·ªùi li√™n h·ªá</div>
                <div id="contactsList">
                    <div style="text-align: center; padding: 16px; color: #65676b;">ƒêang t·∫£i...</div>
                </div>
                <div class="contact-item" style="display: none;">
                    <div class="contact-avatar">
                        J
                        <div class="online-status"></div>
                    </div>
                    <span>Jane Smith</span>
                </div>
                <div class="contact-item" style="display: none;">
                    <div class="contact-avatar">
                        B
                        <div class="online-status"></div>
                    </div>
                    <span>Bob Wilson</span>
                </div>
                <div class="contact-item" style="display: none;">
                    <div class="contact-avatar">
                        A
                        <div class="online-status"></div>
                    </div>
                    <span>Alice Johnson</span>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Create Post Modal -->
    <div class="modal" id="createPostModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">T·∫°o b√†i vi·∫øt</div>
                <div class="modal-close" onclick="closeCreatePostModal()">√ó</div>
            </div>
            <div class="create-post-top" style="margin-bottom: 16px;">
                <div class="create-post-avatar" id="modalAvatar">U</div>
                <div>
                    <div class="post-author-name" id="modalUsername">User</div>
                    <div class="post-time">üåç C√¥ng khai</div>
                </div>
            </div>
            <textarea class="modal-textarea" id="postContent" placeholder="B·∫°n ƒëang nghƒ© g√¨?"></textarea>
            <div id="postImagePreviewContainer" style="margin-top: 12px; text-align: center; display: none;">
                <div style="position: relative; display: inline-block;">
                    <img id="postImagePreview" style="max-width: 100%; max-height: 300px; border-radius: 8px;">
                    <button onclick="removePostImage()" style="position: absolute; top: 8px; right: 8px; width: 32px; height: 32px; border-radius: 50%; background: rgba(0,0,0,0.6); color: white; border: none; cursor: pointer; font-size: 20px; line-height: 1;">√ó</button>
                </div>
            </div>
            <input type="file" id="postImageInput" accept="image/*" style="display: none;" onchange="handlePostImageSelect(event)">
            <div style="display: flex; gap: 8px; margin-top: 12px;">
                <button class="modal-button" onclick="document.getElementById('postImageInput').click()" style="flex: 1; background: #3a3b3c;">
                    üì∑ ·∫¢nh/video
                </button>
            </div>
            <button class="modal-button" id="submitPost">ƒêƒÉng</button>
        </div>
    </div>

    <!-- Find Friends Modal -->
    <div class="modal" id="findFriendsModal">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <div class="modal-title">T√¨m b·∫°n b√®</div>
                <div class="modal-close" onclick="closeFindFriendsModal()">√ó</div>
            </div>
            <div style="padding: 20px;">
                <input type="text" id="searchFriends" placeholder="T√¨m ki·∫øm..." style="width: 100%; padding: 12px; border: none; background: #3a3b3c; color: #e4e6eb; border-radius: 8px; margin-bottom: 16px;">
                <div id="friendSuggestionsList" style="max-height: 400px; overflow-y: auto;">
                    <div style="text-align: center; padding: 20px; color: #b0b3b8;">ƒêang t·∫£i...</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Upload Profile Picture Modal -->
    <div class="modal" id="uploadProfileModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">C·∫≠p nh·∫≠t ·∫£nh ƒë·∫°i di·ªán</div>
                <div class="modal-close" onclick="closeUploadProfileModal()">√ó</div>
            </div>
            <div style="text-align: center; padding: 20px;">
                <div id="previewContainer" style="margin-bottom: 20px;">
                    <img id="imagePreview" style="max-width: 100%; max-height: 300px; border-radius: 8px; display: none;">
                </div>
                <input type="file" id="profilePictureInput" accept="image/*" style="display: none;" onchange="handleFileSelect(event)">
                <button class="modal-button" onclick="document.getElementById('profilePictureInput').click()" style="margin-bottom: 12px;">
                    Ch·ªçn ·∫£nh
                </button>
                <button class="modal-button" id="uploadButton" onclick="uploadProfilePicture()" style="display: none;">
                    T·∫£i l√™n
                </button>
            </div>
        </div>
    </div>

    <!-- Load modules in order: utilities first, then features, then initialization -->
    <script src="../js/utils.js"></script>
    <script src="../js/auth.js"></script>
    <script src="../js/messenger.js"></script>
    <script src="../js/posts.js"></script>
    <script src="../js/contacts.js"></script>
    <script src="../js/friend-requests.js"></script>
    <script src="../js/search.js"></script>
    <script src="../js/notifications.js"></script>
    <script src="../js/chat-popup.js"></script>
    <script src="../js/home.js"></script>
</body>
</html>
